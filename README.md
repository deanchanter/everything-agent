# Everything Agent

A comprehensive BeeAI agent that integrates with the [MCP Everything Server](https://github.com/modelcontextprotocol/servers/tree/main/src/everything) to provide a wide variety of tools and capabilities including mathematical operations, content processing, file handling, web requests, and interactive operations.

## Overview

The Everything Agent leverages the Model Context Protocol (MCP) to connect with the Everything Server, providing access to a rich set of tools while using the BeeAI Framework's RequirementAgent for intelligent tool orchestration and conditional execution ordering.

## Features

- **Mathematical Operations**: Add, calculate, and process numbers
- **Content Processing**: Echo messages, create annotated content, and handle structured data
- **File & Image Handling**: Generate tiny images with downloadable file creation
- **Resource Management**: Access and download resources with proper ID validation
- **Interactive Operations**: Long-running operations with progress tracking
- **Intelligent Tool Orchestration**: Uses conditional requirements to ensure proper tool execution order
- **Downloadable Artifacts**: Creates downloadable files from images and resources instead of UI display

## Project Structure

```sh
├── src/                                    # Source code directory
│   └── everything_agent/                   # Python package directory
│       ├── __init__.py                     # Package initialization
│       └── agent.py                        # Everything Agent implementation with MCP integration
├── Dockerfile                              # Container configuration to build the agent
├── pyproject.toml                          # Package metadata and dependencies
├── uv.lock                                 # Dependency lock file (generated by UV)
└── README.md                               # Project documentation
```

**Key files:**

- `agent.py`: Main Everything Agent implementation with MCP Everything Server integration
- `pyproject.toml`: Dependencies including BeeAI Framework, MCP client, and OpenAI
- `Dockerfile`: Container build configuration for deployment

## Requirements

- [BeeAI Platform](https://docs.beeai.dev/introduction/quickstart) installed
- Python 3.11 or higher
- [UV package manager](https://docs.astral.sh/uv/) for dependency management
- Node.js (for MCP Everything Server via npx)

## Getting Started

1. **Install dependencies**:
   ```sh
   uv sync
   ```

2. **Set up environment variables** (if running locally):
   ```sh
   # Optional: Set custom host/port
   export HOST=127.0.0.1
   export PORT=8000
   ```

3. **Run the agent**:
   ```sh
   uv run server
   ```

## Agent Capabilities

The Everything Agent provides access to the following MCP Everything Server tools:

### Core Tools
- **Think**: Advanced reasoning and step-by-step problem analysis
- **Echo**: Message validation and communication testing
- **Add**: Mathematical addition operations
- **Long Running Operation**: Tasks with progress tracking

### Content & Media Tools
- **Sample LLM**: Generate sample responses for testing
- **Get Tiny Image**: Retrieve test images as downloadable files
- **Annotated Message**: Create structured messages with formatting

### Resource Management Tools
- **Resource Reference**: Access specific resources by ID (1-5)
- **Get Resource Links**: Discover available resources
- **Start Elicitation**: Interactive user input processes

### Advanced Features
- **Conditional Requirements**: Tools execute in logical order (e.g., getResourceLinks before getResourceReference)
- **File Artifacts**: Images and resources are created as downloadable files
- **Progress Tracking**: Long-running operations provide status updates
- **Debug Logging**: Comprehensive logging for troubleshooting


## Usage Examples

Here are some example prompts to test the Everything Agent:

### Basic Operations
```
"Add 5 and 3 together"
"Echo back my message: Hello World"
"Get a tiny test image"
```

### Resource Management
```
"Show me the available resource links"
"Get resource reference for ID 3"
"Download all available resources"
```

### Advanced Tasks
```
"Run a long running operation and show me progress"
"Generate a sample LLM response"
"Create an annotated message with examples"
"Start an interactive elicitation process"
```

## Running Locally

To test the agent locally:

```sh
# Start the agent server
uv run server
```

This will start a local HTTP server on http://127.0.0.1:8000 by default. The agent will automatically:
- Connect to the MCP Everything Server via npx
- Load all available tools
- Register with the BeeAI Platform

You can verify the agent is running with the BeeAI CLI:

```sh
# List available agents
beeai list

# Run the Everything Agent
beeai run "Everything Agent" "Add 5 and 3"
```

## Adding Agents to BeeAI Platform

There are two ways to add your agent to the BeeAI Platform:

### Local Development Mode

When running agents locally with `uv run server`, they are automatically registered with the BeeAI Platform. In this mode:
- The BeeAI Platform will communicate with your local server
- You manage the agent's lifecycle (starting/stopping)
- Changes are immediately available without redeployment

### Deployment from GitHub

To deploy the Everything Agent to the BeeAI Platform:

- Push the code to a GitHub repository
- Add the agent to BeeAI using: `beeai add https://github.com/your-username/everything-agent`

The BeeAI Platform will automatically:
- Clone the repository
- Build a Docker image with Node.js and Python dependencies
- Start the agent container with MCP Everything Server access
- Register the "Everything Agent" in the platform

#### Version Management

- For stable versions, use Git tags (e.g., `v1.0.0`)
- When adding a tagged version: `beeai add https://github.com/your-username/everything-agent@v1.0.0`
- To update: remove the old version (`beeai remove "Everything Agent"`) and add the new one

## Troubleshooting



### Agent Status

To check the status of your agents:

```sh
# List all agents and their status
beeai list

# Check specific agent logs
beeai logs "Everything Agent"
```

### Debug Information

The agent includes comprehensive debug logging:
- Tool execution details
- MCP server connection status
- Resource processing information
- File artifact creation logs

### Logs

- **Local agents:** View logs directly in the terminal where you ran the agent
- **Managed agents:** Use `beeai logs "Everything Agent"` to view logs
- **BeeAI server logs:** Check `/opt/homebrew/var/log/beeai-server.log` (default location)

## Technical Details

### Architecture
- **Framework**: BeeAI Framework with RequirementAgent
- **Protocol**: Model Context Protocol (MCP) for tool integration
- **LLM**: OpenAI models via BeeAI Platform configuration
- **Tools**: MCP Everything Server (12 tools total)

### Key Components
- **Conditional Requirements**: Ensures proper tool execution order
- **File Artifacts**: Converts MCP content to downloadable files
- **Trajectory Metadata**: Provides execution progress feedback
- **Task Status Updates**: Long-running operation progress tracking
